<!DOCTYPE HTML>
<html>
<head>
<title>Basic GeoLocation Map</title>
    <!-- Google Maps and Places API -->
	<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=false"></script>
  <script src="http://maps.googleapis.com/maps/api/directions/output?parameters"></script>
    
    <!-- jQuery -->
  <script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script type="text/javascript">
// 	var x = document.getElementById("geoLocation");
// 	function getLocation() {
// 		if (navigator.geolocation) {
// 			navigator.geolocation.getCurrentPosition(showPosition);
// 		} else {
// 			x.innerHTML = "Geolocation is not supported by this browser."
// 		}
// 	}
// 	function showPosition(position) {
// 		x.innerHTML = "Latitude: " + position.coords.latitude + 
// 		"<br>Longitude: " + position.coords.longitude; 
// 	}
// 	$(document).on('click', '#getGeolocation', function(){
//     console.log("clicked");
//     getLocation();
// });

//map page
var directionsDisplay;
var directionsService = new google.maps.DirectionsService();
var directionsMap;
var z = document.getElementById("directions-canvas");
var directionsLatitude;
var directionsLongitude;
var start;
var end;
// var end = oform.elements.destination2.value;

function getDirectionsLocation() {
  console.log("getDirectionsLocation");
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showDirectionsPosition);
    } else {
        z.innerHTML = "Geolocation is not supported by this browser.";
    }
}
function showDirectionsPosition(position) {
  console.log("showDirectionsPosition");
    directionsLatitude = position.coords.latitude;
    directionsLongitude = position.coords.longitude;
    $('#Latitude2').val(directionsLatitude);
    $('#Longitude2').val(directionsLongitude);
    directionsLatLng = new google.maps.LatLng(directionsLatitude,directionsLongitude);
    getDirections();
}

function getDirections() {
  console.log('getDirections');
  directionsDisplay = new google.maps.DirectionsRenderer();
  //start = new google.maps.LatLng(directionsLatLng);
  var directionsOptions = {
    zoom:12,
    center:directionsLatLng
  }
  directionsMap = new google.maps.Map(document.getElementById("directions-canvas"), directionsOptions);
  var marker= new google.maps.Marker({
    map: directionsMap,
    position: directionsLatLng,
    title:'You are here'
  });
  directionsDisplay.setMap(directionsMap);
  // var marker= new google.maps.Marker({
  //   map: directionsMap,
  //   postition: directionsLatLng,
  //   title:'You are here'
  // });
  calcRoute();
}

function calcRoute() {
  console.log("calcRoute");
  start = directionsLatLng;
 // end = end;
 // end = "8 Vinal Street, Boston";
 // $('#destination').val(end);
  var request = {
    origin:start,
    destination:end,
    travelMode: google.maps.TravelMode.WALKING
  };
  directionsService.route(request, function(result, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      directionsDisplay.setDirections(result);
    }
  });
}

function ClickOnSearch() {
  end = document.getElementById("destination2").value;
  getDirectionsLocation();
}
function selectSearch() {
  end=document.getElementById("s1").value;
  getDirectionsLocation();
}
// $( document ).on( "pageshow", "#directionsPage", function( event ) {
//   getDirectionsLocation();
// });
</script>
<style>
p.padding{
  padding-left: 0.1cm;
}

</style>
</head>
<body onload="getDirectionsLocation()">
    <div style="position:relative; width:100%; height: 25%; overflow:auto; float:left; padding-left:10px; padding-right:10px;">
        <h1 style="text-align:center; background-color:black; color:white; ">BU Map</h1>
        

        <table>
          <tr>
            <td align="left">Current Latitude:</td>
            <td align="left"><input id="Latitude2"/></td>
<!--           </tr>
          <tr> -->
            <td align="left">Current Longitude:</td>
            <td align="left"><input id="Longitude2"/></td>
            <td align="left">Destination</td>
            <td align="left"><input type="text" id="destination2"/>
            <input type="button" value="Search" onclick="ClickOnSearch()">
            </td>

          </tr>
         <!--  <tr>
            <td align="left">Destination:</td>
            <td align="left"><input id="destination" /></td>
          </tr> -->
        </table>
        <!-- input the destination below-->
        <!-- <form>
          Destination:
          <input type="text" id="destination2">  
          <input type="button" value="Search" onclick="ClickOnSearch()">
        </form> -->
        <!-- var getDestination = oform.elements.destination2.value; -->
        <p class="padding">Select direction:
        <select id="s1" onChange="selectSearch()";>
          <option value="775 Commonwealth Avenueï¼ŒBoston">GSU</option>
          <option value="771 Commonwealth Avenue, Boston">Mugar</option>
          <option value="705 Commonwealth Ave, Boston"> Graduate School of Arts&Sciences (CAS)</option>
          <option value="725 Commonwealth Ave, Boston">College of Arts & Sciences (CAS)</option>
          <option value="640 Commonwealth Ave, Boston">College of Communication (COM) </option>
          <option value="2 Silber Way, Boston">School of Eduacation (SED)</option>
          <option value="8 St Marys St, Boston">Photonics Center (PHO)</option>
          <option value="44 Cummington Mall, Boston">College of Engineering (ENG)</option>
          <option value="855 Commonwealth Ave, Boston">College of Fine Arts (CFA)</option>
          <option value="871 Commonwealth Ave, Boston">College of General Studies (CGS)</option>
          <option value="91 Bay State Rd, Boston">Kilachand Honors College</option>
          <option value="928 Commonwealth Ave, Boston">School of Hospitality Administration (SHA)</option>
          <option value="765 Commonwealth Ave, Boston">School of Law (LAW)</option>
          <option value="755 Commonwealth Ave, Boston">Metropolitan College (MET)</option>
          <option value="Rafik B. Hariri Building, 595 Commonwealth Ave, Boston">School of Management</option>
          <option value="635 Commonwealth Ave, Boston">Sargent Collenge of Health and Rehabilitation Sciences(SAR)</option>
          <option value="264 Bay State Rd, Boston">School of Social Work (SSW)</option>
          <option value="745 Commonwealth Ave, Boston">School of Theology (STH)</option>
          <option value="745 Commonwealth Ave, Boston"> University Professors Program (UNI)</option>
          <option value=" Boston"></option>

        </select>
      </p>
      <!--  
        <p class="padding">
		I'm using geolocatoin to automatically centre the map on the user's current location and searching route to a destination.
		</p> -->
    </div>
<div id="directions-canvas" style="postiton:relative;height:500px; width:100%;"></div>
</body>
</html>